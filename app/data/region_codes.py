"""
한국 행정구역 코드 데이터
국토교통부 실거래가 API에서 사용하는 법정동 코드 기준
"""

# 시도 코드 (국토교통부 실제 사이트 기준)
SIDO_CODES = {
    '11': '서울특별시',
    '26': '부산광역시', 
    '27': '대구광역시',
    '28': '인천광역시',
    '29': '광주광역시',
    '30': '대전광역시',
    '31': '울산광역시',
    '36': '세종특별자치시',
    '41': '경기도',
    '43': '충청북도',
    '44': '충청남도',
    '45': '전라북도',
    '46': '전라남도',
    '47': '경상북도',
    '48': '경상남도',
    '50': '제주특별자치도',
    '51': '강원특별자치도',
    '52': '전북특별자치도'
}

# 서울특별시 시군구 코드 (정부 사이트 실제 사용 코드)
SEOUL_SIGUNGU = {
    '11680': '강남구',
    '11740': '강동구', 
    '11305': '강북구',
    '11500': '강서구',
    '11620': '관악구',
    '11215': '광진구',
    '11530': '구로구',
    '11545': '금천구',
    '11350': '노원구',
    '11320': '도봉구',
    '11230': '동대문구',
    '11590': '동작구',
    '11440': '마포구',
    '11410': '서대문구',
    '11650': '서초구',
    '11200': '성동구',
    '11290': '성북구',
    '11710': '송파구',
    '11470': '양천구',
    '11560': '영등포구',
    '11170': '용산구',
    '11380': '은평구',
    '11110': '종로구',
    '11140': '중구',
    '11260': '중랑구'
}

# 경기도 주요 시군구 코드
GYEONGGI_SIGUNGU = {
    '41131': '수원시 영통구',
    '41133': '수원시 팔달구', 
    '41135': '수원시 장안구',
    '41137': '수원시 권선구',
    '41171': '성남시 수정구',
    '41173': '성남시 중원구',
    '41175': '성남시 분당구',
    '41190': '의정부시',
    '41210': '안양시 만안구',
    '41220': '안양시 동안구',
    '41250': '부천시',
    '41270': '광명시',
    '41285': '평택시',
    '41290': '동두천시',
    '41310': '안산시 상록구',
    '41312': '안산시 단원구',
    '41360': '고양시 덕양구',
    '41364': '고양시 일산동구',
    '41365': '고양시 일산서구',
    '41390': '과천시',
    '41410': '구리시',
    '41430': '남양주시',
    '41450': '오산시',
    '41460': '시흥시',
    '41480': '군포시',
    '41500': '의왕시',
    '41550': '하남시',
    '41570': '용인시 처인구',
    '41571': '용인시 기흥구',
    '41573': '용인시 수지구',
    '41590': '파주시',
    '41610': '이천시',
    '41630': '안성시',
    '41650': '김포시',
    '41670': '화성시',
    '41800': '광주시',
    '41820': '양주시',
    '41830': '포천시'
}

# 부산광역시 시군구 코드
BUSAN_SIGUNGU = {
    '26110': '중구',
    '26140': '서구',
    '26170': '동구',
    '26200': '영도구',
    '26230': '부산진구',
    '26260': '동래구',
    '26290': '남구',
    '26320': '북구',
    '26350': '해운대구',
    '26380': '사하구',
    '26410': '금정구',
    '26440': '강서구',
    '26470': '연제구',
    '26500': '수영구',
    '26530': '사상구',
    '26710': '기장군'
}

# 인천광역시 시군구 코드
INCHEON_SIGUNGU = {
    '28110': '중구',
    '28140': '동구',
    '28177': '미추홀구',
    '28185': '연수구',
    '28200': '남동구',
    '28237': '부평구',
    '28245': '계양구',
    '28260': '서구',
    '28710': '강화군',
    '28720': '옹진군'
}

# 대구광역시 시군구 코드
DAEGU_SIGUNGU = {
    '27110': '중구',
    '27140': '동구',
    '27170': '서구',
    '27200': '남구',
    '27230': '북구',
    '27260': '수성구',
    '27290': '달서구',
    '27710': '달성군'
}

# 광주광역시 시군구 코드
GWANGJU_SIGUNGU = {
    '29110': '동구',
    '29140': '서구',
    '29155': '남구',
    '29170': '북구',
    '29200': '광산구'
}

# 대전광역시 시군구 코드
DAEJEON_SIGUNGU = {
    '30110': '동구',
    '30140': '중구',
    '30170': '서구',
    '30200': '유성구',
    '30230': '대덕구'
}

# 울산광역시 시군구 코드
ULSAN_SIGUNGU = {
    '31110': '중구',
    '31140': '남구',
    '31170': '동구',
    '31200': '북구',
    '31710': '울주군'
}

# 세종특별자치시
SEJONG_SIGUNGU = {
    '36110': '세종시'
}

# 강원특별자치도 주요 시군구 코드
GANGWON_SIGUNGU = {
    '42110': '춘천시',
    '42150': '원주시',
    '42180': '강릉시',
    '42190': '동해시',
    '42210': '태백시',
    '42220': '속초시',
    '42230': '삼척시',
    '42720': '홍천군',
    '42730': '횡성군',
    '42750': '영월군',
    '42760': '평창군',
    '42770': '정선군',
    '42780': '철원군',
    '42790': '화천군',
    '42800': '양구군',
    '42810': '인제군',
    '42820': '고성군',
    '42830': '양양군'
}

# 충청북도 주요 시군구 코드
CHUNGBUK_SIGUNGU = {
    '43111': '청주시 상당구',
    '43112': '청주시 서원구',
    '43113': '청주시 흥덕구',
    '43114': '청주시 청원구',
    '43130': '충주시',
    '43150': '제천시',
    '43720': '보은군',
    '43730': '옥천군',
    '43740': '영동군',
    '43745': '증평군',
    '43750': '진천군',
    '43760': '괴산군',
    '43770': '음성군',
    '43800': '단양군'
}

# 충청남도 주요 시군구 코드
CHUNGNAM_SIGUNGU = {
    '44131': '천안시 동남구',
    '44133': '천안시 서북구',
    '44150': '공주시',
    '44180': '보령시',
    '44200': '아산시',
    '44210': '서산시',
    '44230': '논산시',
    '44250': '계룡시',
    '44270': '당진시',
    '44710': '금산군',
    '44760': '부여군',
    '44770': '서천군',
    '44790': '청양군',
    '44800': '홍성군',
    '44810': '예산군',
    '44825': '태안군'
}

# 전라남도 주요 시군구 코드
JEONNAM_SIGUNGU = {
    '46110': '목포시',
    '46130': '여수시',
    '46150': '순천시',
    '46170': '나주시',
    '46230': '광양시',
    '46710': '담양군',
    '46720': '곡성군',
    '46730': '구례군',
    '46770': '고흥군',
    '46780': '보성군',
    '46790': '화순군',
    '46800': '장흥군',
    '46810': '강진군',
    '46820': '해남군',
    '46830': '영암군',
    '46840': '무안군',
    '46860': '함평군',
    '46870': '영광군',
    '46880': '장성군',
    '46890': '완도군',
    '46900': '진도군',
    '46910': '신안군'
}

# 경상북도 주요 시군구 코드
GYEONGBUK_SIGUNGU = {
    '47111': '포항시 남구',
    '47113': '포항시 북구',
    '47130': '경주시',
    '47150': '김천시',
    '47170': '안동시',
    '47190': '구미시',
    '47210': '영주시',
    '47230': '영천시',
    '47250': '상주시',
    '47280': '문경시',
    '47290': '경산시',
    '47720': '군위군',
    '47730': '의성군',
    '47750': '청송군',
    '47760': '영양군',
    '47770': '영덕군',
    '47820': '청도군',
    '47830': '고령군',
    '47840': '성주군',
    '47850': '칠곡군',
    '47900': '예천군',
    '47920': '봉화군',
    '47930': '울진군',
    '47940': '울릉군'
}

# 경상남도 주요 시군구 코드
GYEONGNAM_SIGUNGU = {
    '48121': '창원시 의창구',
    '48123': '창원시 성산구',
    '48125': '창원시 마산합포구',
    '48127': '창원시 마산회원구',
    '48129': '창원시 진해구',
    '48170': '진주시',
    '48220': '통영시',
    '48240': '사천시',
    '48250': '김해시',
    '48270': '밀양시',
    '48310': '거제시',
    '48330': '양산시',
    '48720': '의령군',
    '48730': '함안군',
    '48740': '창녕군',
    '48820': '고성군',
    '48840': '남해군',
    '48850': '하동군',
    '48860': '산청군',
    '48870': '함양군',
    '48880': '거창군',
    '48890': '합천군'
}

# 제주특별자치도 시군구 코드
JEJU_SIGUNGU = {
    '50110': '제주시',
    '50130': '서귀포시'
}

# 전북특별자치도 주요 시군구 코드  
JEONBUK_SIGUNGU = {
    '52111': '전주시 완산구',
    '52113': '전주시 덕진구',
    '52130': '군산시',
    '52140': '익산시',
    '52180': '정읍시',
    '52190': '남원시',
    '52210': '김제시',
    '52710': '완주군',
    '52720': '진안군',
    '52730': '무주군',
    '52740': '장수군',
    '52750': '임실군',
    '52770': '순창군',
    '52790': '고창군',
    '52800': '부안군'
}

# 전체 시군구 매핑
ALL_SIGUNGU = {
    '11': SEOUL_SIGUNGU,
    '26': BUSAN_SIGUNGU,
    '27': DAEGU_SIGUNGU,
    '28': INCHEON_SIGUNGU,
    '29': GWANGJU_SIGUNGU,
    '30': DAEJEON_SIGUNGU,
    '31': ULSAN_SIGUNGU,
    '36': SEJONG_SIGUNGU,
    '41': GYEONGGI_SIGUNGU,
    '43': CHUNGBUK_SIGUNGU,
    '44': CHUNGNAM_SIGUNGU,
    '46': JEONNAM_SIGUNGU,
    '47': GYEONGBUK_SIGUNGU,
    '48': GYEONGNAM_SIGUNGU,
    '50': JEJU_SIGUNGU,
    '51': GANGWON_SIGUNGU,
    '52': JEONBUK_SIGUNGU
}

# 서울시 각 구별 읍면동 데이터 (실제 사이트 기준)
EMD_DATA = {
    # 강남구
    '11710': [
        '신사동', '논현1동', '논현2동', '압구정동', '청담동',
        '삼성1동', '삼성2동', '대치1동', '대치2동', '대치4동',
        '역삼1동', '역삼2동', '도곡1동', '도곡2동', 
        '개포1동', '개포2동', '개포4동', '일원본동', '일원1동', '일원2동', '수서동'
    ],
    
    # 강동구
    '11770': [
        '강일동', '상일동', '명일1동', '명일2동', '고덕1동', '고덕2동',
        '암사1동', '암사2동', '암사3동', '천호1동', '천호2동', '천호3동',
        '성내1동', '성내2동', '성내3동', '둔촌1동', '둔촌2동'
    ],
    
    # 강북구  
    '11305': [
        '삼양동', '미아동', '송중동', '송천동', '삼각산동',
        '번1동', '번2동', '번3동', '수유1동', '수유2동', '수유3동',
        '우이동', '인수동'
    ],
    
    # 강서구
    '11500': [
        '염창동', '등촌1동', '등촌2동', '등촌3동', '화곡본동',
        '화곡1동', '화곡2동', '화곡3동', '화곡4동', '화곡6동', '화곡8동',
        '가양1동', '가양2동', '가양3동', '발산1동', '우장산동',
        '공항동', '방화1동', '방화2동', '방화3동'
    ],
    
    # 관악구
    '11650': [
        '보라매동', '청림동', '행운동', '청룡동', '은천동',
        '성현동', '중앙동', '인헌동', '남현동', '서원동',
        '신원동', '서림동', '미성동', '난곡동', '조원동',
        '대학동', '삼성동', '신사동', '신림동', '난향동', '조원동'
    ],
    
    # 광진구
    '11215': [
        '중곡1동', '중곡2동', '중곡3동', '중곡4동', '능동',
        '구의1동', '구의2동', '구의3동', '광장동', '자양1동',
        '자양2동', '자양3동', '자양4동', '화양동', '군자동'
    ],
    
    # 구로구
    '11530': [
        '신도림동', '구로1동', '구로2동', '구로3동', '구로4동', '구로5동',
        '가리봉동', '고척1동', '고척2동', '개봉본동', '개봉1동',
        '개봉2동', '개봉3동', '오류1동', '오류2동', '항동'
    ],
    
    # 금천구  
    '11560': [
        '가산동', '독산본동', '독산1동', '독산2동', '독산3동', '독산4동',
        '시흥본동', '시흥1동', '시흥2동', '시흥3동', '시흥4동', '시흥5동'
    ],
    
    # 서초구
    '11680': [
        '서초1동', '서초2동', '서초3동', '서초4동', '잠원동',
        '반포본동', '반포1동', '반포2동', '반포3동', '반포4동',
        '방배본동', '방배1동', '방배2동', '방배3동', '방배4동',
        '양재1동', '양재2동', '내곡동'
    ],
    
    # 송파구
    '11740': [
        '풍납1동', '풍납2동', '거여1동', '거여2동', '마천1동', '마천2동',
        '방이1동', '방이2동', '오금동', '오륜동', '송파1동', '송파2동',
        '석촌동', '삼전동', '가락본동', '가락1동', '가락2동',
        '문정1동', '문정2동', '장지동', '위례동'
    ],
    
    # 마포구
    '11440': [
        '공덕동', '아현동', '용강동', '대흥동', '염리동',
        '신수동', '서강동', '서교동', '홍익동', '합정동',
        '망원1동', '망원2동', '연남동', '성산1동', '성산2동',
        '상암동', '월드컵파크동'
    ],
    
    # 노원구
    '11350': [
        '월계1동', '월계2동', '월계3동', '공릉1동', '공릉2동',
        '하계1동', '하계2동', '중계본동', '중계1동', '중계2동', '중계4동',
        '상계1동', '상계2동', '상계3동', '상계4동', '상계5동',
        '상계6동', '상계7동', '상계8동', '상계9동', '상계10동'
    ],
    
    # 도봉구
    '11320': [
        '쌍문1동', '쌍문2동', '쌍문3동', '쌍문4동',
        '방학1동', '방학2동', '방학3동',
        '창1동', '창2동', '창3동', '창4동', '창5동',
        '도봉1동', '도봉2동'
    ],
    
    # 동대문구
    '11230': [
        '용신동', '제기동', '전농1동', '전농2동', '답십리1동', '답십리2동',
        '장안1동', '장안2동', '청량리동', '회기동', '휘경1동', '휘경2동',
        '이문1동', '이문2동'
    ],
    
    # 동작구
    '11620': [
        '노량진1동', '노량진2동', '상도1동', '상도2동', '상도3동', '상도4동',
        '흑석동', '사당1동', '사당2동', '사당3동', '사당4동', '사당5동',
        '대방동', '신대방1동', '신대방2동'
    ],
    
    # 서대문구
    '11410': [
        '천연동', '북아현동', '충현동', '신촌동', '연희동',
        '홍제1동', '홍제2동', '홍제3동', '홍은1동', '홍은2동',
        '남가좌1동', '남가좌2동', '북가좌1동', '북가좌2동'
    ],
    
    # 성동구
    '11200': [
        '왕십리도선동', '왕십리2동', '마장동', '사근동', '행당1동', '행당2동',
        '응봉동', '금호1가동', '금호2·3가동', '금호4가동',
        '옥수동', '성수1가1동', '성수1가2동', '성수2가1동', '성수2가3동',
        '용답동', '홍익동'
    ],
    
    # 성북구
    '11290': [
        '성북동', '삼선동', '동선동', '돈암1동', '돈암2동',
        '안암동', '보문동', '정릉1동', '정릉2동', '정릉3동', '정릉4동',
        '길음1동', '길음2동', '종암동', '월곡1동', '월곡2동',
        '장위1동', '장위2동', '장위3동', '석관동'
    ],
    
    # 양천구
    '11470': [
        '목1동', '목2동', '목3동', '목4동', '목5동',
        '신월1동', '신월2동', '신월3동', '신월4동', '신월5동', '신월6동', '신월7동',
        '신정1동', '신정2동', '신정3동', '신정4동', '신정6동', '신정7동'
    ],
    
    # 영등포구
    '11590': [
        '영등포본동', '영등포동', '여의동', '당산1동', '당산2동',
        '도림동', '문래동', '양평1동', '양평2동',
        '신길1동', '신길3동', '신길4동', '신길5동', '신길6동', '신길7동',
        '대림1동', '대림2동', '대림3동'
    ],
    
    # 용산구
    '11170': [
        '후암동', '용산2가동', '남영동', '청파동', '원효로1동', '원효로2동',
        '효창동', '용문동', '한강로동', '이촌1동', '이촌2동',
        '이태원1동', '이태원2동', '한남동', '서빙고동', '보광동'
    ],
    
    # 은평구
    '11380': [
        '녹번동', '불광1동', '불광2동', '갈현1동', '갈현2동',
        '구산동', '대조동', '응암1동', '응암2동', '응암3동',
        '역촌동', '신사1동', '신사2동', '증산동', '수색동', '진관동'
    ],
    
    # 종로구
    '11110': [
        '청운효자동', '사직동', '삼청동', '부암동', '무악동', '교남동',
        '가회동', '종로1·2·3·4가동', '종로5·6가동', '이화동', '혜화동',
        '명륜3가동', '창신1동', '창신2동', '창신3동', '숭인1동', '숭인2동'
    ],
    
    # 중구
    '11140': [
        '소공동', '회현동', '명동', '필동', '장충동', '광희동',
        '을지로동', '신당동', '다산동', '약수동', '청구동',
        '신당5동', '동화동', '황학동', '중림동'
    ],
    
    # 중랑구
    '11260': [
        '면목본동', '면목2동', '면목3·8동', '면목4동', '면목5동', '면목7동',
        '상봉1동', '상봉2동', '중화1동', '중화2동', '묵1동', '묵2동',
        '망우본동', '망우3동', '신내1동', '신내2동'
    ]
}

# 주요 지역별 아파트 단지명 데이터
APARTMENT_COMPLEX_DATA = {
    # 강남구 - 대치동
    '11710_대치1동': [
        '은마아파트', '대치아이파크', '미도아파트', '대치삼성래미안', 
        '대치힐스테이트', '대치현대아파트', '대치롯데캐슬', '대치푸르지오'
    ],
    '11710_대치2동': [
        '개포자이', '개포미도아파트', '개포래미안포레', '개포주공아파트',
        '개포현대아파트', '개포롯데캐슬', '개포디에이치아브뉴', '개포한신아파트'
    ],
    '11710_역삼1동': [
        '역삼현대아파트', '역삼래미안', '역삼아크로리버', '테헤란로아이파크',
        '역삼타워팰리스', '삼성래미안', '역삼SK리더스뷰'
    ],
    '11710_압구정동': [
        '현대아파트', '한양아파트', '압구정현대아파트', '압구정한양아파트',
        '압구정로데오', '압구정갤러리아팰리스', '압구정래미안', '신사 SK리더스뷰'
    ],
    
    # 서초구
    '11680_서초1동': [
        '서초현대아파트', '서초래미안', '서초아크로리버', '서초센트럴하이츠',
        '서초삼성래미안', '서초푸르지오', '서초힐스테이트'
    ],
    '11680_잠원동': [
        '잠원한강하이츠', '잠원현대아파트', '잠원래미안', '잠원삼성아파트',
        '잠원주공아파트', '잠원브라운스톤'
    ],
    '11680_반포1동': [
        '반포자이', '반포래미안', '반포우성아파트', '반포현대아파트',
        '반포주공아파트', '래미안 반포센트레빌', '반포아크로리버파크'
    ],
    '11680_양재1동': [
        '양재타워', '양재현대아파트', '양재삼성래미안', 'AT센터아파트',
        '양재센트럴아이파크', '양재디에이치아브뉴'
    ],
    
    # 송파구
    '11740_잠실동': [
        '잠실주공5단지', '잠실리센츠아파트', '잠실엘스아파트', '잠실트리지움',
        '잠실래미안크레시티', '잠실아이파크', '잠실디에이치아브뉴'
    ],
    '11740_가락1동': [
        '가락시영아파트', '가락현대아파트', '가락래미안', '가락삼성아파트',
        '가락주공아파트', '가락센트럴아이파크'
    ],
    '11740_문정1동': [
        '문정동래미안', '문정SK아파트', '문정현대아파트', '문정삼성아파트',
        '문정힐스테이트', '문정푸르지오'
    ],
    
    # 강서구
    '11500_화곡1동': [
        '화곡현대아파트', '화곡삼성아파트', '화곡주공아파트', '화곡래미안',
        '화곡SK뷰아파트', '화곡롯데캐슬'
    ],
    '11500_등촌1동': [
        '등촌현대아파트', '등촌삼성아파트', '등촌주공아파트', '등촌래미안',
        '등촌아이파크', '등촌힐스테이트'
    ],
    
    # 마포구
    '11440_합정동': [
        '합정래미안', '합정현대아파트', '합정삼성아파트', '합정아이파크',
        '합정리버뷰아파트', '합정센트럴아이파크'
    ],
    '11440_망원1동': [
        '망원현대아파트', '망원삼성아파트', '망원래미안', '망원한강아파트',
        '망원주공아파트', '망원푸르지오'
    ],
    
    # 용산구
    '11170_이촌1동': [
        '이촌래미안', '이촌현대아파트', '이촌SK리더스뷰', '이촌주공아파트',
        '이촌한강아파트', '이촌센트럴아이파크'
    ],
    '11170_한남동': [
        '한남더힐', '한남래미안', '한남현대아파트', '한남삼성아파트',
        '한강맨션', '리버사이드아파트'
    ],
    
    # 강동구
    '11770_천호1동': [
        '천호현대아파트', '천호삼성아파트', '천호래미안', '천호주공아파트',
        '천호SK아파트', '천호푸르지오'
    ],
    '11770_암사1동': [
        '암사현대아파트', '암사삼성아파트', '암사래미안', '암사주공아파트',
        '암사한강아파트', '암사센트럴하이츠'
    ]
}

def get_sido_list():
    """시도 목록 반환"""
    return [{"code": code, "name": name} for code, name in SIDO_CODES.items()]

def get_sigungu_list(sido_code: str):
    """시군구 목록 반환"""
    if sido_code not in ALL_SIGUNGU:
        return []
    
    sigungu_dict = ALL_SIGUNGU[sido_code]
    return [{"code": code, "name": name} for code, name in sigungu_dict.items()]

def get_emd_list(sigungu_code: str):
    """읍면동 목록 반환"""
    if sigungu_code not in EMD_DATA:
        return []
    
    emd_list = EMD_DATA[sigungu_code]
    return [{"name": name} for name in emd_list]

def get_complex_list(sigungu_code: str, emd_name: str = ""):
    """아파트 단지명 목록 반환"""
    # 시군구코드_읍면동명 형태로 키 생성
    key = f"{sigungu_code}_{emd_name}" if emd_name else sigungu_code
    
    if key not in APARTMENT_COMPLEX_DATA:
        return []
    
    complex_list = APARTMENT_COMPLEX_DATA[key]
    return [{"name": name} for name in complex_list]

def get_region_name(sido_code: str, sigungu_code: str = None):
    """지역명 반환"""
    sido_name = SIDO_CODES.get(sido_code, "")
    
    if not sigungu_code:
        return sido_name
    
    if sido_code not in ALL_SIGUNGU:
        return sido_name
    
    sigungu_name = ALL_SIGUNGU[sido_code].get(sigungu_code, "")
    return f"{sido_name} {sigungu_name}"

def find_region_code_by_address(address: str):
    """도로명 주소를 기반으로 지역 코드를 찾아 반환"""
    # 주소를 공백으로 분리
    parts = address.strip().split()
    
    if len(parts) < 2:
        return None, None
    
    sido_name = parts[0]  # 첫 번째 부분은 시도명
    sigungu_name = parts[1]  # 두 번째 부분은 시군구명
    
    # 시도 코드 찾기
    sido_code = None
    for code, name in SIDO_CODES.items():
        if sido_name in name or name in sido_name:
            sido_code = code
            break
    
    if not sido_code:
        return None, None
    
    # 시군구 코드 찾기
    sigungu_code = None
    if sido_code in ALL_SIGUNGU:
        sigungu_dict = ALL_SIGUNGU[sido_code]
        for code, name in sigungu_dict.items():
            if sigungu_name in name or name in sigungu_name:
                sigungu_code = code
                break
    
    return sido_code, sigungu_code

def parse_road_address(address: str):
    """도로명 주소 파싱하여 구조화된 정보 반환"""
    parts = address.strip().split()
    
    result = {
        'sido': '',
        'sigungu': '', 
        'road_name': '',
        'building_number': '',
        'detail': ''
    }
    
    if len(parts) >= 2:
        result['sido'] = parts[0]
        result['sigungu'] = parts[1]
        
        # 나머지 부분에서 도로명과 건물번호 찾기
        remaining = ' '.join(parts[2:])
        
        # 건물번호 패턴 찾기 (숫자 + 선택적 문자)
        import re
        number_pattern = r'(\d+(?:[가-힣]|번길)?(?:\s*-?\s*\d+)?(?:[가-힣])?)'  
        number_match = re.search(number_pattern, remaining)
        
        if number_match:
            result['building_number'] = number_match.group(1)
            # 건물번호 이전 부분이 도로명
            road_part = remaining[:number_match.start()].strip()
            if road_part:
                result['road_name'] = road_part
            
            # 건물번호 이후 부분이 상세주소
            detail_part = remaining[number_match.end():].strip()
            if detail_part:
                result['detail'] = detail_part
        else:
            # 건물번호를 찾지 못한 경우 전체를 도로명으로 처리
            result['road_name'] = remaining
    
    return result